$PSDocId: Document Version 1.0 for Runtime Library Version 3.3$
$PSLibId: Runtime Library Version 3.3$

    MENU サンプルプログラムビューワ                         S.C.E. 95/10/20

    サンプルプログラムを、ディレクトリ階層式のメニューから起動する
    ユーティリティーです。
    (ただしサンプルプログラムはチャイルドプロセスとして実行できる形式
     であることが必要です。)

    メニュー定義ファイル(MENU.LST)の読み込み元と、サンプルプログラムの
    読み込み元の違いにより、以下の 3種類のタイプがあります。

            | MENU.LST                        | SAMPLE PROGRAM
    ------------------------------------------+-----------------
    PCMENU  | PC PCMENU.LST                   | PC \PSX 以下
    CDMENU  | CD \CDMENU.LST                  | CD \PSX 以下
    CDMENU2 | PC CDMENU.LST                   | CD \PSX 以下

   (注意 1) ここでの CD とは、DTL-S2190 のことです。

   (注意 2) PC 開発環境(DTL-H2000)上でのみ動作します。
    メインメモリを 8MB 使用し、PC のハードディスクにアクセスするタイプも
    あるので、実機やデバッキングステーションでは動作しません。

..............................................................................

「3つのタイプに共通する内容」

（ 1 ）概要

    あらかじめ、チャイルドプロセスとして実行できるようにメイクした
    プログラムを、ディレクトリ階層式メニューから実行します。
    実行するプログラムが必要とするデータの類は、メニュー定義ファイル
    に記述することで、あらかじめメモリにロードされます。

（ 2 ）作成方法

    < PCMENU の場合 >

        > psymake pcmenu

    < CDMENU の場合 > (デフォルト)

        > psymake cdmenu

    < CDMENU2 の場合 >

        > psymake cdmenu2

（ 3 ）操作方法

    メニュー上
      ○ or START : 選択・実行
      ↑          : 上へ移動
      ↓          : 下へ移動
      ×          : 一番上へ移動
      □          : ヘルプ画面
      SELECT      : 英語・日本語切り替え

    サンプルプログラム上
      SELECT   : 終了してメニューに返る。
      (一部、SELECT + START, L1 + L2 + SELECT で終了するものがあります。)

（ 4 ）サンプル実行ファイルの条件

    チャイルドプロセスとして実行できるファイルにはいくつかの条件があります。
    スタックを親プロセスと共有することや、コールバックの初期化・終了など
    です。
    詳しくは、\PSX\MODULE\EXECMENU をご覧下さい。
    また、ライブラリ3.3のほとんどのサンプルプログラムが、"psymake for_menu"
    でこれらの条件を満たした形でつくることができます。

    ( 条件 )
    1. EXE フォーマットに限ります。CPE は未対応です。
    2. スタックを親プロセスと共有するために、none2.obj をリンクしたもの。
    3. 最初に ResetCallback() を行っていること。
    4. 最後に ResetGraph(3), StopCallback() を行い、
       exit() ではなく return で終了していること。

    ( 注意 )
    これらの実行ファイルは、、単体で実行した場合、
    スタックポインタの設定がされないため、動作は保証されませんので、
    ご注意下さい。
    なお、CD (DTL-S2190) の中の \PSX\KANJI、\PSX\SAMPLE、\PSX\UTILITY 以下
    の EXE ファイル は、CDMENU が使用するものです。
    単体で実行した場合、スタックポインタの設定がされないため、
    動作は保証されませんので、ご注意下さい。

（ 5 ）メニュー定義ファイルの形式

    サンプルプログラムが c:\psx\sample 以下ではなく、別の場所に存在する場合、
    メニュー定義ファイル (PCMENU では、PCMENU.LST) の -ROOT と -FIXROOT の
    項目を変更して下さい。

    1. -ITEM num        メニューの項目数の最大値を指定。(現在使われていない)
    2. -ROOT path\      サンプルのある場所の共通のパス。("\"で終わること)
                        (任意の場所で再指定可能。)
    3. -FIXROOT path\   固定するパス名。("\"で終わること)

    3 は一番はじめに必ず必要です。

    4. title filename   メニュー名とサンプルのファイル名。
    5. -SENTJ "str"     説明文。(日本語)
    6. -SENTE "str"     説明文。(英語)
    7. -DATA num        読み込むデータがある場合、データの数を指定。
    8. datafile address -DATA num の指定後に、num 個のファイルとアドレス
                        を指定。

    5, 6, 7, 8 は 4 に対応し、省略が可能です。

..............................................................................

「3つのタイプ別の注意点」

 ( 1 ) 実行に関する注意点

    それぞれ、PCMENU.BAT, CDMENU.BAT, CDMENU2.BAT で起動できます。
    ただしそれ以外の場合、次の注意が必要です。

    < PCMENU の場合 >

    単に、run pcmenu では起動しないので、次のうちいずれかを行って下さい。

    1. デッバガ上で起動する。

        > dbugpsx /e /r50 pcmenu

    2. 起動後に、DOS の pause を実行し続ける。

        > pause

    < CDMENU の場合 >

    特に問題はありません。

    < CDMENU2 の場合 >

    run cdmenu2 を実行後、メニュー画面が表示されるまで、DOS の pause を
    かけて下さい。CDMENU2 の場合、PCMENU と違い、一度メニュー画面が表示
    されたあとは、pause を解除しても構いません。

 ( 2 ) サンプルに関する注意点

    < PCMENU の場合 >

    PC のハードディスク上に、実行可能なサンプル実行ファイルが必要です。
    また、サンプルによっては、データの入った CD (DTL-S2190) が必要です。

    < CDMENU の場合 >

    ライブラリ3.3 の CD (DTL-S2190)を使用する。

    < CDMENU2 の場合 >

    ライブラリ3.3 の CD (DTL-S2190)を使用する。
    PC のカレントディレクトリに CDMENU.LST が必要です。

                                                                    以上
